<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>
    <title>教师认证</title>
    <link rel="stylesheet" href="../../css/mui.min.css"/>
    <link rel="stylesheet" href="../../css/base.css"/>
    <link rel="stylesheet" href="../../css/sweetalert2.css"/>
    <link rel="stylesheet" href="../../css/iconfont.css"/>
    <link rel="stylesheet" href="../../css/header.css"/>
    <style>
        html{
            background-color: #f4f4f4;
        }
        input[type=color], input[type=date], input[type=datetime-local], input[type=datetime], input[type=email], input[type=month], input[type=number], input[type=password], input[type=search], input[type=tel], input[type=text], input[type=time], input[type=url], input[type=week], select, textarea{
            border:none;
            text-indent: 25%;
            margin-bottom: 0;
            font-size: 0.28rem;
        }
        .main{
            padding-top: 1.8rem;
        }

        .Id_photo{
            background-color: #fff;
            margin-top: 0.2rem;
        }
        .Id_photo>h2{
            min-height: 1rem;
            line-height: 1rem;
            font-size: 0.28rem;
            color:#333;
            padding-left: 0.2rem;
        }
        .Id_photo>h2>em{
            color:#f01414;
        }
        .against>.against_box,.open>.open_box{
            background: url("../../img/teacher_auth.png") no-repeat center;
            -webkit-background-size: 100%;
            background-size: 100%;
            width: 100%;
            height: 4rem;
            margin:0 auto;
            margin-top: 0.2rem;
            overflow: hidden;
        }

        .against_box>input,.open_box>input{
            opacity: 0;
            display: block;
            width: 100%;
            height:4rem;
        }
        .notice{
            padding: 0.3rem;
            padding-bottom: 1rem;
        }
        .notice>h3{
            font-size: 0.32rem;
            height: 1rem;
            line-height: 1rem;
        }
        .notice>p{
            font-size: 0.26rem;
            line-height: 0.4rem;
        }
        .submit{
            width: 100%;
            height: 0.8rem;
            line-height: 0.8rem;
            position: fixed;
            z-index: 1;
            bottom: 0;
            background: #f01414;
            color:#fff;
            font-size: 0.32rem;
            text-align: center;
        }
        .teach_school,.teach_subject,.teach_grade{
            height: 1rem;
            line-height: 1rem;
            background-color: #fff;
            padding: 0 0.3rem;
            font-size: 0.3rem;
        }
        .teach_school>i,.teach_subject>i,.teach_grade>i{
            vertical-align: middle;
            line-height: 1rem;
        }
    </style>
</head>
<body>
<div class="layer">
    <header id="header" class="mui-bar mui-bar-nav">
        <i class="mui-icon mui-icon-left-nav mui-pull-left" onclick="back()"></i>
        <h1 class="mui-title">教师认证</h1>
    </header>
    <div class="main">
       <div class="teach_school clearfix" onclick="location.href='./teach_school.html'">
           <em>任教学校</em>
           <i class="mui-icon mui-icon-arrowright f_right"></i>
           <span class="f_right">werw</span>
       </div>
        <div class="teach_grade clearfix" onclick="location.href='./teach_grade.html'">
            <em>任教年级</em>
            <i class="mui-icon mui-icon-arrowright f_right"></i>
            <span class="f_right">werw</span>
        </div>
        <div class="teach_subject clearfix" onclick="location.href='./teach_subject.html'">
           <em>任教学科</em>
            <i class="mui-icon mui-icon-arrowright f_right"></i>
           <span class="f_right">dasfdsa</span>
       </div>
        <div class="Id_photo clearfix">
            <h2 >必上传资料</h2>
            <div class="against">
                <div class="against_box">
                    <input type="file" id="against" accept="image/*" capture="camera" />
                </div>
            </div>
            <h2 >非必上传资料(上传任职证明，职位认证后将点亮 <em>V </em>图标）</h2>
            <div class="open">
                <div class="open_box">
                    <input type="file" id="just" accept="image/*" capture="camera"/>
                </div>
            </div>
        </div>
        <div class="notice">
            <h3>认证须知</h3>
            <div class="notice_content">
                <p>1、教师认证主要证明您是在职学校教师，同时开启个人中心的教务管理权限，认证审核后您可在教务管理中发布您的教学视频;</p>
                <p>2、我们将在您提交人证信息后的5个工作日(不包含节假日)内完成审核，审核结果将会以短信和系统通知的形式发送给您;</p>
                <p>3、教师证明中的身份证号码必须与实名认证中的身份信息保存一致。如有误，将无法通过审核;</p>
                <p>4、实名认证审核完成后,系统将自动发放10个积分作为奖励;</p>
                <p>5、我们会确保您所提供的信息均处于严格的保密状态，不会泄露;</p>
                <p>6、如存在恶意乱填写姓名、假证明、及上传与教师资格证无关图片者，一经发现将冻结猴姆账号。</p>
            </div>
        </div>
        <button class="submit">提交</button>
    </div>
</div>
</body>
<script src="../../js/mui.min.js"></script>
<script src="../../js/x_rem.js"></script>
<script src="../../js/jquery.min.js"></script>
<script src="../../js/base.js"></script>
<script src="../../js/back.js"></script>
<script src="../../js/sweetalert2.js"></script>
<script>

    /* 单个上传图片*/
    document.querySelector("#against").onchange=function () {
        var file=document.querySelector("#against").files;
        html5Reader(file,".against_box")

    }
    document.querySelector("#just").onchange=function () {
        var file=document.querySelector("#just").files;
        html5Reader(file,".open_box")

    }

    function html5Reader(file,ele){
        //var file = file.files[0];
        var reader = new FileReader();
        // reader.readAsDataURL(file);
        reader.readAsDataURL(file[0]);
        reader.onload = function(e){
            var pic = document.querySelector(ele);
            // console.log(reader.result);
            pic.style.backgroundImage="url("+reader.result+")";
        }
    }
    $(function () {
        /* 选择 任教年级 学校等信息*/
        var teach_grade=localStorage.getItem("teach_grade");
        if(teach_grade){
            $(".teach_grade>span").text(teach_grade)
        }
        var teach_subject=localStorage.getItem("teach_subject");
        if(teach_grade){
            $(".teach_subject>span").text(teach_subject)
        }


        $(".submit").click(function () {
            var idCardNumber=$("#Idcard").val();
            //身份证
            isCardNo(idCardNumber);
            //验证 身份证号
            function isCardNo(card)
            {
                // 身份证号码为15位或者18位，15位时全为数字，18位前17位为数字，最后一位是校验位，可能为数字或字符X
                var reg = /(^\d{18}$)|(^\d{17}(\d|X|x)$)/;
                if(reg.test(card) === false)
                {
                    sweetAlert(
                            "sorry",
                            "您的身份证输入不合法",
                            "error"
                    ).then(function () {
                                $("#Idcard").val("");
                            })
                    return false;
                }
            }
            var base64IdCardBack=$(".against_box").css('backgroundImage').replace('url(','').replace(')','');
            //console.log(base64IdCardBack);
            if(base64IdCardBack.replace(/\"/g,"").match("img/against.png")){
                //if(base64IdCardBack.replace(/\"/g,"") =="http://localhost:63342/MU/img/against.png"){
                base64IdCardBack="";
            }else{
                base64IdCardBack=base64IdCardBack.replace(/"/g,"");
            }
        })
    })
</script>
</html>